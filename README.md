# Шо это такое?

Класс для реализации простых, long polling ботов в telegram на python3

**ОСТОРОЖНО! очень странный и непонятный код**

На данный момент поддерживается:
* обработка команд;
* обработка тесктового сообщения;
* обработка сообщений с фото;
* отправления текстового сообщения; 
* отправление сообщения с фото.

Планируется реализовать в скором времени (правда, правда):
* поддержка связаных логических блоков диалога
 

Класс Bot находится в файле Bot.py.
Все остальные файлы - примеры использования.
 
## Что необходимо для запуска?
В классе Bot используются библиотеки:
* requests
* urllib
В примере также исспользуется библиотеки numpy и [Adafruit_DHT](https://github.com/adafruit/Adafruit_Python_DHT).

## Как этим пользоваться?

**АХТУНГ!** Для начала работы не забудьте зарегестрировать бота с помощью 
[@BotFather](https://telegram.me/BotFather)
, выполнить необходимые настройки и получить свой уникальный токен.

Для создания своего бота необходимо наследовать класс Bot, в кострукторе вызвать базовый конструктор
Bot(url, token, update_frequency=1) где:
    url - URL телеграмма
    token - токен Вашего бота
    update_frequency - частота обновления бота (по умолчанию = 1)

Для добавления новой команды, необходимо создать в классе метод с сигнатурой:
* on_<название_команды>_command(info)

    info - словарь который содержат информацию про текущее сообщение, содержит такие поля как:
    'text', 'data', 'chat', 'message_id', 'from' которые идентичны таковым в [обекте Message](https://core.telegram.org/bots/api#message)

Существует несколько всторенных команд, которые можно реализовать в своем классе:
* default_command(info) - вызывется если ни одна комманда не подходит под запрос пользователя,
    комманда по умолчанию

* on_message_received(info) - вызывается когда  пользователь отправил сообщение без команды

* on_photo_received(info) - вызывается когда пользователь
    отправил фотографию
    **АХТУНГ!** в словаре info вместо поля 'text' находятся поля 'img' и 'caption' с изображением и его
    описание соответственно.

Реализация ни одного из данных методов в Вашем классе не является обязательной. При отсутствии
подходящего метода, сообщение от пользователя будет проигнорировано и не получит никакой ответ.

Хорошим тоном считается реализация команд /start и /help.

методы:
* run() - запуск бота

* send_message(chat_id, message) - отправляет сообщение message пользователю в чат chat_id

* send_photo(chat_id, img, caption) - отправляет фото img пользователю в чат chat_id с описанием
    caption
    
## Экземпл

Потыкать в демонстрационного бота  можно по нику [@IndigoRoomBot](https://t.me/IndigoRoomBot)

Если он Вас игнорит, не стоит расстраиваться слишком сильно, возможно он просто плохо себя вел.
